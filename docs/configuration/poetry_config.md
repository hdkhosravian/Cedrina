# Poetry Configuration Documentation for Cedrina

## Overview
Poetry is a dependency and packaging manager for Python used in the `cedrina` project to manage project dependencies, metadata, and development tools. This document explains the purpose of Poetry configuration files, their contents, and how to customize them to suit project needs.

## Poetry Configuration Files

### 1. `pyproject.toml`
- **What It Is**: The primary configuration file for Poetry, defining project metadata and dependencies.
- **What It Does**: Specifies the project's name, version, description, runtime dependencies (e.g., FastAPI, SQLModel), development dependencies (e.g., pytest, black), and configurations for various tools (e.g., mypy, ruff).
- **Key Contents**: 
  - `[tool.poetry]`: Contains metadata like `name`, `version`, `description`, and `authors`.
  - `[tool.poetry.dependencies]`: Lists runtime dependencies with version constraints (e.g., `fastapi = "^0.68.1"`).
  - `[tool.poetry.group.dev.dependencies]`: Lists development dependencies like testing and formatting tools (e.g., `pytest`, `black`).
  - `[tool.mypy]`, `[tool.ruff]`, `[tool.black]`: Configures static typing, linting, and formatting tools.
- **Location**: Project root directory.
- **How to Customize**: 
  1. Add new dependencies using `poetry add <package>` to automatically update `pyproject.toml` and `poetry.lock`.
  2. Manually edit version constraints or add optional dependencies under `[tool.poetry.dependencies]` if specific versions are required.
  3. Update development tools or add new ones under `[tool.poetry.group.dev.dependencies]` (e.g., `poetry add --group dev coverage` for test coverage reporting).
  4. Adjust tool settings like `mypy` strictness or `black` line length in their respective sections to align with coding standards.
- **Important Notes**: Commit `pyproject.toml` to version control to maintain project consistency. Avoid manual edits unless necessary, as Poetry commands handle most updates. Test dependency changes locally to ensure compatibility.

### 2. `poetry.lock`
- **What It Is**: A lock file generated by Poetry to ensure reproducible dependency installations.
- **What It Does**: Locks the exact versions of all dependencies (including transitive ones) resolved by Poetry, guaranteeing the same environment across different setups.
- **Key Contents**: 
  - Detailed list of packages with exact versions, hashes, and dependency relationships.
- **Location**: Project root directory.
- **How to Customize**: 
  1. You don't typically customize `poetry.lock` directly. Instead, update `pyproject.toml` and run `poetry update` to regenerate the lock file with new dependency versions.
  2. If specific versions cause issues, pin them in `pyproject.toml` before updating the lock file.
- **Important Notes**: Always commit `poetry.lock` to version control alongside `pyproject.toml`. Do not edit manually, as it's auto-generated and could lead to inconsistent environments.

## Customization Guidelines
- **Dependency Management**: Use `poetry add` and `poetry remove` for managing dependencies to avoid errors in `pyproject.toml`. Specify version constraints (e.g., `^1.0.0` for compatible updates, `=1.0.0` for exact versions) based on project stability needs.
- **Tool Configurations**: Tailor linting and formatting rules to enforce coding standards. For example, set `black` line length to 100 if preferred, or enable stricter `mypy` checks as the project matures.
- **Version Control**: Both files must be versioned to ensure team members and CI/CD pipelines use the same dependency set. Exclude virtual environment paths or Poetry cache from Git.
- **Testing Changes**: After modifying dependencies or tool settings, run `poetry install` and test the application locally to confirm compatibility and functionality.

## How to Use
1. Install Poetry if not already installed: `pip install poetry` or follow official installation instructions.
2. Initialize or update the project environment with `poetry install` to create a virtual environment based on `pyproject.toml` and `poetry.lock`.
3. Add dependencies as needed with `poetry add <package>` for runtime or `poetry add --group dev <package>` for development tools.
4. Update dependencies to newer versions with `poetry update` or specific packages with `poetry update <package>`.
5. Use `poetry run <command>` to execute scripts or tests within the virtual environment (e.g., `poetry run pytest`).

This documentation provides a clear understanding of Poetry configuration in the `cedrina` project, enabling developers to manage dependencies and tools effectively. 